<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>DIGIY DRIVER PRO ‚Äî VTC 0% Commission</title>
  <meta name="theme-color" content="#061b14"/>

  <style>
    :root{
      --bg:#061b14; --card:#0b2a1f; --line:rgba(255,255,255,.14);
      --text:#eafff1; --muted:rgba(234,255,241,.78);
      --green:#16a34a; --gold:#facc15; --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:
        radial-gradient(900px 500px at 10% -10%, rgba(34,197,94,.20), transparent 60%),
        radial-gradient(900px 500px at 110% 0%, rgba(250,204,21,.14), transparent 55%),
        var(--bg);
      color:var(--text);
      padding:18px;
    }

    /* STATUS GUARD */
    #guard_status {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      background: rgba(0, 0, 0, 0.9);
      color: white;
      border-radius: 10px;
      font-weight: 700;
      font-size: 14px;
      z-index: 9999;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* APP CACH√âE PAR D√âFAUT */
    .app { display: none; }
    html.access-ok .app { display: block; }

    .wrap{
      max-width:760px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
    }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:var(--r);
      padding:28px;
      box-shadow:0 14px 44px rgba(0,0,0,.35);
      width:100%;
    }

    h1{
      margin:0 0 8px;
      font-size:32px;
      letter-spacing:.2px;
      background:linear-gradient(135deg, var(--green), var(--gold));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }

    p{margin:0 0 14px; color:var(--muted); line-height:1.6; font-size:16px;}

    .pill{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding:10px 16px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.18);
      color:rgba(234,255,241,.9);
      font-size:14px;
      font-weight:700;
      margin:14px 0;
    }

    .row{display:flex; gap:12px; flex-wrap:wrap; margin-top:20px;}

    a.btn, button.btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding:14px 20px;
      border-radius:14px;
      font-weight:900;
      text-decoration:none;
      border:0;
      cursor:pointer;
      font-size:16px;
      flex:1;
      min-width:200px;
      transition:all .2s;
    }

    .primary{
      background:linear-gradient(135deg, rgba(34,197,94,.95), rgba(16,185,129,.85));
      color:#042012;
      box-shadow:0 4px 16px rgba(34,197,94,.3);
    }

    .primary:hover{
      transform:translateY(-2px);
      box-shadow:0 8px 24px rgba(34,197,94,.4);
    }

    .secondary{
      background:rgba(250,204,21,.14);
      border:1px solid rgba(250,204,21,.25);
      color:var(--text);
    }

    .secondary:hover{
      background:rgba(250,204,21,.2);
      border-color:rgba(250,204,21,.4);
    }

    .hr{height:1px; background:rgba(255,255,255,.12); margin:20px 0;}

    .note{
      margin-top:14px;
      font-size:13px;
      color:rgba(234,255,241,.7);
      line-height:1.6;
      padding:12px;
      background:rgba(0,0,0,.2);
      border-radius:10px;
      border:1px solid rgba(255,255,255,.08);
    }

    @media(max-width:640px){
      .row{flex-direction:column;}
      a.btn{width:100%;}
    }
  </style>
</head>
<body>

<!-- STATUS GUARD -->
<div id="guard_status">üîê V√©rification...</div>

<!-- GUARD SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="./guard.js"></script>

<script>
  (async () => {
    // ‚úÖ Porte unique g√©r√©e par guard.js:
    // - missing_phone => redirige vers https://beauville.github.io/inscription-digiy/
    // - not_active    => redirige aussi vers inscription (tarifs visibles)
    // - active        => acc√®s OK
    const ok = await window.DIGIY.guardOrPay("DRIVER_PRO");
    if (!ok) return; // Redirig√© par le guard

    console.log("ü¶Ö DIGIY DRIVER PRO charg√© avec succ√®s");
    console.log("üìä Access:", window.DIGIY_ACCESS);

    // Masquer le status
    setTimeout(() => {
      const s = document.getElementById("guard_status");
      if (s) s.style.display = "none";
    }, 900);

    // Afficher le phone dans l'UI
    const phone = (window.DIGIY_ACCESS && window.DIGIY_ACCESS.phone) ? window.DIGIY_ACCESS.phone : "";
    const el = document.getElementById("userPhone");
    if (el && phone) el.textContent = phone;
  })();
</script>

<!-- APP DIGIY DRIVER -->
<div class="app">
  <div class="wrap">
    <div class="card">
      <h1>üöó DIGIY DRIVER PRO</h1>
      <p>
        Bienvenue dans ton espace chauffeur professionnel.
        <strong>0% commission</strong> sur toutes tes courses.
      </p>

      <div class="pill">
        ‚úÖ <span id="userPhone">+221 77 XXX XX XX</span> ‚Ä¢ Abonnement actif
      </div>

      <div class="hr"></div>

      <div class="row">
        <a class="btn primary" href="./driver-zone-now.html">üöó Entrer dans la zone</a>
        <a class="btn secondary" href="./courses.html">üìã Voir les courses</a>
        <a class="btn secondary" href="./profil-chauffeur.html">üë§ Mon profil</a>
      </div>

      <div class="note">
        <strong>üì¶ Ton abonnement DRIVER PRO</strong><br>
        ‚Ä¢ Prix: <strong>9,900 FCFA/mois</strong><br>
        ‚Ä¢ Paiement: Wave / Orange Money<br>
        ‚Ä¢ Commission: <strong>0%</strong> (tu gardes 100%)<br>
        ‚Ä¢ Support: WhatsApp +221 77 134 28 89
      </div>
    </div>
  </div>
</div>

</body>
</html>
